<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="jsErrorBox">
      <button onclick="jsError(event)">触发js错误</button>
    </div>
    <button onclick="promiseError()">触发promise错误 字符串</button>
    <button onclick="promiseErrorObj()">触发promise错误 对象</button>
    <img src="https://www.baidu.com" alt="test" />

    <hr />
    <button onclick="xhrSuccess()">成功请求</button>
    <button onclick="xhrError2()">触发xhr错误2</button>
    <script src="../../dist/monitor-sdk.es.js"></script>
    <script>
      function jsError(e) {
        // 保存当前事件
        window._lastEvent = e;
        // 触发错误
        console.log(a.b);
      }
      function promiseError() {
        Promise.reject({
          name: "test",
        });
      }
      function promiseErrorObj() {
        new Promise((resolve, reject) => {
          console.log(a.b);
        });
      }

      // api错误
      function xhrSuccess() {
        fetch("http://localhost:3000/api/success", {
          method: "GET",
        });
      }
      function xhrError2() {
        fetch("http://localhost:3000/api/404", {
          method: "GET",
        });
      }
    </script>
  </body>
</html>
